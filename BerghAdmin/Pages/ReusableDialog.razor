@page "/reusable-dialog"

@using Syncfusion.Blazor.Popups
@using BerghAdmin.Services

@inject ISendMailService SendMailService

<div id="DialogTarget">
    <SfDialog Target="#DialogTarget" Width="1000px" IsModal="true" ShowCloseIcon="true" @bind-Visible="@IsOpen">
        <DialogTemplates>
            <Header> Send email(s) </Header>
            <Content>
            </Content>
        </DialogTemplates>
        <DialogButtons>
            <DialogButton Content="Send" IsPrimary="true" OnClick="@SendEMail" />
            <DialogButton Content="Close" IsPrimary="false" OnClick="@DialogClose" />
        </DialogButtons>
    </SfDialog>
</div>

<style>
    a, a:hover, .highcontrast #dialog a, .highcontrast #dialog a:hover {
        color: inherit;
        text-decoration: none;
    }
    .fabric #target .e-dialog {
        height: 306px;
    }
    .material #target .e-dialog {
        height: 270px;
    }
    .bootstrap4 #target .e-dialog {
        height: 305px;
    }
    #target .e-dialog {
        height: 270px;
    }
    #target {
        height: 500px;
    }
</style>

@code {
    SfDialog DialogObj;

    [Parameter]
    public bool IsOpen { get; set; } = false;

    public void DialogOpen()
    {
        IsOpen = true;
        this.StateHasChanged();
    }

    private void SendEMail()
    {
        SendMailService.SendMail();
        IsOpen = false;
        this.StateHasChanged();
    }

    private void DialogClose()
    {
        IsOpen = false;
        this.StateHasChanged();
    }
} 
